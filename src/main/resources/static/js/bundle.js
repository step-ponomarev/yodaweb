var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let b;function v(t){b=t}function w(){if(!b)throw new Error("Function called outside component initialization");return b}function y(t){w().$$.on_mount.push(t)}const $=[],k=[],x=[],_=[],T=Promise.resolve();let E=!1;function C(t){x.push(t)}let O=!1;const S=new Set;function A(){if(!O){O=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];v(e),B(e.$$)}for($.length=0;k.length;)k.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];S.has(e)||(S.add(e),e())}x.length=0}while($.length);for(;_.length;)_.pop()();E=!1,O=!1,S.clear()}}function B(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const F=new Set;let L;function D(){L={r:0,c:[],p:L}}function N(){L.r||o(L.c),L=L.p}function q(t,e){t&&t.i&&(F.delete(t),t.i(e))}function X(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),L.c.push(()=>{F.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function j(t,e){const n=e.token={};function o(t,o,s,a){if(e.token!==n)return;e.resolved=a;let r=e.ctx;void 0!==s&&(r=r.slice(),r[s]=a);const l=t&&(e.current=t)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==o&&t&&(D(),X(t,1,1,()=>{e.blocks[n]=null}),N())}):e.block.d(1),l.c(),q(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[o]=l),c&&A()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=w();if(t.then(t=>{v(n),o(e.then,1,e.value,t),v(null)},t=>{v(n),o(e.catch,2,e.error,t),v(null)}),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var s}const P="undefined"!=typeof window?window:global;function R(t){t&&t.c()}function K(t,n,a){const{fragment:r,on_mount:l,on_destroy:c,after_update:i}=t.$$;r&&r.m(n,a),C(()=>{const n=l.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]}),i.forEach(C)}function M(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&($.push(t),E||(E=!0,T.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,s,a,r,l,c,u=[-1]){const d=b;v(e);const f=s.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=a?a(e,f,(t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(p.bound[t]&&p.bound[t](s),m&&I(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(i)}else p.fragment&&p.fragment.c();s.intro&&q(e.$$.fragment),K(e,s.target,s.anchor),A()}v(d)}class U{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const J=[];function z(e,n=t){let o;const s=[];function r(t){if(a(e,t)&&(e=t,o)){const t=!J.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),J.push(n,e)}if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(a,l=t){const c=[a,l];return s.push(c),1===s.length&&(o=n(r)||t),a(e),()=>{const t=s.indexOf(c);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}const W=z(""),Y=z(""),G=z(null),V=z(!1),Z=z(!1),Q=z(Array(0)),tt=z(""),et=z(null),nt=z(null);function ot(e){let n,s,a,r,d,p,h,b,v,w,y,$,k,x,_,T,E,C,O,S,A;return{c(){n=u("div"),s=u("div"),a=u("form"),r=u("div"),r.innerHTML='<h2 class="svelte-19a25bx">please log in</h2>',d=f(),p=u("label"),h=u("div"),h.textContent="username",b=f(),v=u("input"),w=f(),y=u("label"),$=u("div"),$.textContent="password",k=f(),x=u("input"),_=f(),T=u("div"),T.innerHTML='<button class="loginForm__submitButton svelte-19a25bx" type="submit">log in</button> \n                <label class="checkbox-label svelte-19a25bx"><input type="checkbox" name="remember-me" class="defCheckMark">\n                    remember me\n                </label>',E=f(),C=u("a"),C.textContent="sign up",O=f(),S=u("input"),g(r,"class","loginForm__title svelte-19a25bx"),g(h,"class","inputAround__text svelte-19a25bx"),g(h,"name","label-div"),g(v,"type","text"),g(v,"id","username"),g(v,"name","username"),g(v,"class","loginForm__input svelte-19a25bx"),v.required=!0,g(p,"class","inputAround svelte-19a25bx"),g($,"class","inputAround__text svelte-19a25bx"),g($,"name","label-div"),g(x,"type","password"),g(x,"id","password"),g(x,"name","password"),g(x,"class","loginForm__input svelte-19a25bx"),x.required=!0,g(y,"class","inputAround svelte-19a25bx"),g(T,"class","loginForm__buttonArea svelte-19a25bx"),g(C,"class","regLink svelte-19a25bx"),g(C,"href","/registration"),g(S,"id","_csrf"),g(S,"name","_csrf"),g(S,"type","hidden"),S.value=e[2],g(a,"class","loginForm svelte-19a25bx"),g(s,"class","container svelte-19a25bx"),g(n,"class","login svelte-19a25bx")},m(t,i,u){c(t,n,i),l(n,s),l(s,a),l(a,r),l(a,d),l(a,p),l(p,h),e[3](h),l(p,b),l(p,v),l(a,w),l(a,y),l(y,$),e[6]($),l(y,k),l(y,x),l(a,_),l(a,T),l(a,E),l(a,C),l(a,O),l(a,S),u&&o(A),A=[m(v,"focus",e[4]),m(v,"focusout",e[5]),m(x,"focus",e[7]),m(x,"focusout",e[8]),m(C,"click",e[9]),m(a,"submit",st)]},p(t,[e]){4&e&&(S.value=t[2])},i:t,o:t,d(t){t&&i(n),e[3](null),e[6](null),o(A)}}}async function st(t){const e=new XMLHttpRequest,n=new FormData(t.target);e.open("POST","/login",!0),e.send(n),e.onload=()=>{200==e.status&&(window.location.pathname="/")},t.target.username.value="",t.target.password.value="",t.preventDefault()}function at(t,e,n){let o,s,a;r(t,Y,t=>n(2,o=t));return[s,a,o,function(t){k[t?"unshift":"push"](()=>{n(0,s=t)})},()=>{n(0,s.style.color="rgb(73, 160, 235)",s)},()=>{n(0,s.style.color="rgb(125, 138, 150)",s)},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})},()=>{n(1,a.style.color="rgb(73, 160, 235)",a)},()=>{n(1,a.style.color="rgb(125, 138, 150)",a)},t=>{ht.set(t.target.pathname),window.history.pushState({path:"/registration"},"",window.location.origin+"/registration"),t.preventDefault()}]}class rt extends Error{constructor(t){super(t),this.name="ValidationError"}}const lt=/^[a-zA-Z]\w{5,25}$/,ct=/^\w{8,28}$/;function it(t){let e,n,o=t[18].message+"";return{c(){e=u("div"),n=d(o),g(e,"class","error svelte-13gb9fw")},m(t,o){c(t,e,o),l(e,n)},p(t,e){8&e&&o!==(o=t[18].message+"")&&h(n,o)},d(t){t&&i(e)}}}function ut(t){let e,n,o=t[17]+"";return{c(){e=u("div"),n=d(o),g(e,"class","success svelte-13gb9fw")},m(t,o){c(t,e,o),l(e,n)},p(t,e){8&e&&o!==(o=t[17]+"")&&h(n,o)},d(t){t&&i(e)}}}function dt(e){let n;return{c(){n=u("div"),n.textContent="..."},m(t,e){c(t,n,e)},p:t,d(t){t&&i(n)}}}function ft(e){let n,s,a,r,d,p,h,b,v,w,y,$,k,x,_,T,E,C,O,S,A,B,F,L,D,N,q,X,P,R={ctx:e,current:null,token:null,pending:dt,then:ut,catch:it,value:17,error:18};return j(r=e[3],R),{c(){n=u("div"),s=u("div"),a=u("div"),R.block.c(),d=f(),p=u("form"),h=u("div"),h.innerHTML='<h2 class="svelte-13gb9fw">please sign up</h2>',b=f(),v=u("label"),w=u("div"),w.textContent="username",y=f(),$=u("input"),k=f(),x=u("label"),_=u("div"),_.textContent="password",T=f(),E=u("input"),C=f(),O=u("label"),S=u("div"),S.textContent="confirm password",A=f(),B=u("input"),F=f(),L=u("div"),L.innerHTML='<button class="loginForm__submitButton svelte-13gb9fw" type="submit">\n                    register\n                </button>',D=f(),N=u("a"),N.textContent="sign in",q=f(),X=u("input"),g(a,"class","errorBlock svelte-13gb9fw"),g(h,"class","loginForm__title svelte-13gb9fw"),g(w,"class","inputAround__text svelte-13gb9fw"),g(w,"name","label-div"),g($,"type","text"),g($,"id","username"),g($,"name","username"),g($,"class","loginForm__input svelte-13gb9fw"),$.required=!0,g(v,"class","inputAround svelte-13gb9fw"),g(_,"class","inputAround__text svelte-13gb9fw"),g(_,"name","label-div"),g(E,"type","password"),g(E,"id","password"),g(E,"name","password"),g(E,"class","loginForm__input svelte-13gb9fw"),E.required=!0,g(x,"class","inputAround svelte-13gb9fw"),g(S,"class","inputAround__text svelte-13gb9fw"),g(S,"name","label-div"),g(B,"type","password"),g(B,"id","confirmPassword"),g(B,"name","confirmPassword"),g(B,"class","loginForm__input svelte-13gb9fw"),B.required=!0,g(O,"class","inputAround svelte-13gb9fw"),g(L,"class","loginForm__buttonArea svelte-13gb9fw"),g(N,"class","regLink svelte-13gb9fw"),g(N,"href","/login"),g(X,"id","_csrf"),g(X,"name","_csrf"),g(X,"type","hidden"),X.value=e[4],g(p,"class","registrationForm svelte-13gb9fw"),g(p,"id","registrationFrom"),g(s,"class","container svelte-13gb9fw"),g(n,"class","registration svelte-13gb9fw")},m(t,r,i){c(t,n,r),l(n,s),l(s,a),R.block.m(a,R.anchor=null),R.mount=()=>a,R.anchor=null,l(s,d),l(s,p),l(p,h),l(p,b),l(p,v),l(v,w),e[7](w),l(v,y),l(v,$),l(p,k),l(p,x),l(x,_),e[10](_),l(x,T),l(x,E),l(p,C),l(p,O),l(O,S),e[13](S),l(O,A),l(O,B),l(p,F),l(p,L),l(p,D),l(p,N),l(p,q),l(p,X),i&&o(P),P=[m($,"focus",e[8]),m($,"focusout",e[9]),m(E,"focus",e[11]),m(E,"focusout",e[12]),m(B,"focus",e[14]),m(B,"focusout",e[15]),m(N,"click",e[16]),m(p,"submit",e[5])]},p(t,[n]){if(e=t,R.ctx=e,8&n&&r!==(r=e[3])&&j(r,R));else{const t=e.slice();t[17]=R.resolved,R.block.p(t,n)}16&n&&(X.value=e[4])},i:t,o:t,d(t){t&&i(n),R.block.d(),R.token=null,R=null,e[7](null),e[10](null),e[13](null),o(P)}}}function pt(t,e,n){const o=function(t){return lt.test(t)}(t),s=function(t){return ct.test(t)}(e),a=n===e;if(!o)throw new rt("invalid username");if(!s)throw new rt("invalid password");if(!a)throw new rt("passwords mismatch")}function mt(t,e,n){let o,s,a,l;r(t,Y,t=>n(4,o=t));let c="";async function i(){const t=document.querySelector("#registrationFrom"),e=t.username.value,n=t.password.value,s=t.confirmPassword.value;t.password.value="",t.confirmPassword.value="",await pt(e,n,s);const a={username:e,password:n,userRole:["USER"]};let r=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(a)});if(!r.ok)throw new Error("server not found");const l="true"===await r.text();if(alert(l),!l)throw new rt("user with that username already exists");return"Success!"}return[s,a,l,c,o,function(t){n(3,c=i()),t.preventDefault()},i,function(t){k[t?"unshift":"push"](()=>{n(0,s=t)})},()=>{n(0,s.style.color="rgb(73, 160, 235)",s)},()=>{n(0,s.style.color="rgb(125, 138, 150)",s)},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})},()=>{n(1,a.style.color="rgb(73, 160, 235)",a)},()=>{n(1,a.style.color="rgb(125, 138, 150)",a)},function(t){k[t?"unshift":"push"](()=>{n(2,l=t)})},()=>{n(2,l.style.color="rgb(73, 160, 235)",l)},()=>{n(2,l.style.color="rgb(125, 138, 150)",l)},t=>{currentRoute.set(t.target.pathname),window.history.pushState({path:"/login"},"",window.location.origin+"/login"),t.preventDefault()}]}const gt={"/login":class extends U{constructor(t){super(),H(this,t,at,ot,a,{})}},"/registration":class extends U{constructor(t){super(),H(this,t,mt,ft,a,{})}}},ht=z("/");function bt(e){let n,s,a,r,d,p,h,b,v,w,y,$,k,x;return{c(){n=u("div"),s=u("div"),a=u("div"),r=f(),d=u("div"),d.textContent="Входящие",p=f(),h=u("div"),h.textContent="Сегодня",b=f(),v=u("div"),v.textContent="На неделе",w=f(),y=u("div"),y.textContent="Позже",$=f(),k=u("div"),k.textContent="logout",g(a,"class","inbox boxButton__active svelte-s4bepw"),a.hidden=!0,g(d,"class","inbox boxButton svelte-s4bepw"),g(d,"id","inbox"),g(h,"class","boxButton svelte-s4bepw"),g(h,"id","today"),g(v,"class","boxButton svelte-s4bepw"),g(v,"id","week"),g(y,"class","boxButton svelte-s4bepw"),g(y,"id","late"),g(s,"class","boxesPart svelte-s4bepw"),g(k,"class","logoutButton svelte-s4bepw"),g(n,"class","content svelte-s4bepw")},m(t,i,u){c(t,n,i),l(n,s),l(s,a),l(s,r),l(s,d),l(s,p),l(s,h),l(s,b),l(s,v),l(s,w),l(s,y),l(n,$),l(n,k),u&&o(x),x=[m(d,"click",yt),m(h,"click",yt),m(v,"click",yt),m(y,"click",yt),m(k,"click",e[0])]},p:t,i:t,o:t,d(t){t&&i(n),o(x)}}}function vt(t){t.target.classList.add("boxButton__active"),nt.set(t.target.id)}function wt(t){t.preventDefault()}async function yt(t){const e=t.target;tt.set(e.id.toUpperCase()),ht.set(`/${e.id}`),window.history.pushState({path:`/${e.id}`},"",window.location.origin+`/${e.id}`)}function $t(t,e,n){let o,s,a,l,c;r(t,G,t=>n(2,o=t)),r(t,tt,t=>n(3,s=t)),r(t,et,t=>n(4,a=t)),r(t,nt,t=>n(5,l=t)),r(t,Y,t=>n(6,c=t));let{updateTask:i}=e;o.username;function u(t){s!==t.target.id&&t.target.classList.remove("boxButton__active"),nt.set(null)}async function d(t){!function(t,e,n=e){t.set(n)}(et,a.container=l.toUpperCase(),a),await i(a),await nt.set(null),s!==t.target.id&&t.target.classList.remove("boxButton__active")}return y(async()=>{Array.from(document.querySelectorAll(".boxButton")).forEach(t=>{t.addEventListener("dragenter",vt),t.addEventListener("dragleave",u),t.addEventListener("drop",d),t.addEventListener("dragover",wt)})}),tt.subscribe(t=>{if(""!==t){const e=t.toLowerCase(),n=Array.from(document.getElementsByClassName("boxButton")),o=document.getElementById(e);n.forEach(t=>{t.id!==e&&t.classList.remove("boxButton__active")}),o.classList.add("boxButton__active")}}),t.$set=t=>{"updateTask"in t&&n(1,i=t.updateTask)},[async function(){(await fetch("/logout",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":c}})).ok&&(window.location.pathname="/")},i]}class kt extends U{constructor(t){super(),H(this,t,$t,bt,a,{updateTask:1})}}function xt(e){let n,s,a,r,d,p,h;return{c(){n=u("div"),s=u("label"),s.textContent=">",a=f(),r=u("input"),d=f(),p=u("label"),p.textContent="#add",g(s,"id","arrowLabel"),g(s,"class","svelte-ybu00q"),g(r,"type","text"),g(r,"spellcheck","false"),g(r,"placeholder","Добавить новую задача"),g(r,"class","svelte-ybu00q"),g(p,"id","addLabel"),g(p,"class","svelte-ybu00q"),g(n,"class","addTaskBlock svelte-ybu00q")},m(t,i,u){c(t,n,i),l(n,s),e[10](s),l(n,a),l(n,r),e[11](r),l(n,d),l(n,p),e[12](p),e[13](n),u&&o(h),h=[m(r,"keypress",e[4]),m(r,"focus",e[6]),m(r,"focusout",e[7]),m(p,"click",e[5])]},p:t,i:t,o:t,d(t){t&&i(n),e[10](null),e[11](null),e[12](null),e[13](null),o(h)}}}function _t(t,e,n){let o,s,a,l,c,i;async function u(){if(!i.value.trim())return void n(3,i.value="",i);const t={completed:!1,statement:i.value.trim(),dateOfCreation:new Date(Date.now()),dateOfFinish:null,creator:null,container:"INBOX"},e=await fetch("/task",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(t)});if(e.ok){let t=s.slice();const n=await e.json();await t.push({id:n.id,statement:n.statement,container:n.container,completed:n.completed}),await Q.set(t)}n(3,i.value="",i)}return r(t,Y,t=>n(8,o=t)),r(t,Q,t=>n(9,s=t)),[a,l,c,i,async function(t){13===t.keyCode&&await u()},u,function(){n(0,a.style.borderColor="rgb(73, 160, 235)",a),n(1,l.style.color="rgb(73, 160, 235)",l),n(2,c.style.color="rgb(123, 177, 70)",c)},function(){n(0,a.style.borderColor="rgb(125, 138, 150)",a),n(1,l.style.color="rgb(125, 138, 150)",l),n(2,c.style.color="rgb(125, 138, 150)",c),n(2,c.style.textShadow="none",c)},o,s,function(t){k[t?"unshift":"push"](()=>{n(1,l=t)})},function(t){k[t?"unshift":"push"](()=>{n(3,i=t)})},function(t){k[t?"unshift":"push"](()=>{n(2,c=t)})},function(t){k[t?"unshift":"push"](()=>{n(0,a=t)})}]}class Tt extends U{constructor(t){super(),H(this,t,_t,xt,a,{})}}function Et(e){let n,o,a,r,l,d;return{c(){n=u("input"),a=f(),r=u("label"),g(n,"type","checkbox"),g(n,"id",o="task-"+e[0]),g(n,"class","css-checkbox svelte-l9citf"),n.checked=e[2],g(r,"for",l="task-"+e[0]),g(r,"class","css-label svelte-l9citf")},m(t,o,l){c(t,n,o),c(t,a,o),c(t,r,o),l&&d(),d=m(n,"click",(function(){s(e[1])&&e[1].apply(this,arguments)}))},p(t,[s]){e=t,1&s&&o!==(o="task-"+e[0])&&g(n,"id",o),4&s&&(n.checked=e[2]),1&s&&l!==(l="task-"+e[0])&&g(r,"for",l)},i:t,o:t,d(t){t&&i(n),t&&i(a),t&&i(r),d()}}}function Ct(t,e,n){let{id:o}=e,{checkEvent:s}=e,{completed:a}=e;return t.$set=t=>{"id"in t&&n(0,o=t.id),"checkEvent"in t&&n(1,s=t.checkEvent),"completed"in t&&n(2,a=t.completed)},[o,s,a]}class Ot extends U{constructor(t){super(),H(this,t,Ct,Et,a,{id:0,checkEvent:1,completed:2})}}function St(t){let e,n,s,a,r,p,b,v,w,y=t[0].statement+"";const $=new Ot({props:{checkEvent:t[4],id:t[0].id,completed:t[0].completed}});return{c(){e=u("div"),R($.$$.fragment),n=f(),s=u("div"),a=u("div"),r=d(y),p=f(),b=u("div"),g(a,"class","statementField svelte-yl74hr"),g(a,"contenteditable","true"),g(a,"type","text"),g(a,"spellcheck","false"),g(a,"onautocomplete","false"),g(b,"class","deleteButton svelte-yl74hr"),g(s,"class","taskBlock svelte-yl74hr"),g(e,"class","content svelte-yl74hr")},m(i,u,d){c(i,e,u),K($,e,null),l(e,n),l(e,s),l(s,a),l(a,r),t[18](a),l(s,p),l(s,b),t[19](b),t[20](e),v=!0,d&&o(w),w=[m(a,"keypress",t[5]),m(a,"focus",t[6]),m(a,"focusout",t[7]),m(a,"paste",At),m(b,"click",t[11]),m(s,"click",t[10]),m(e,"mouseover",t[8]),m(e,"mouseout",t[9])]},p(t,[e]){const n={};1&e&&(n.id=t[0].id),1&e&&(n.completed=t[0].completed),$.$set(n),(!v||1&e)&&y!==(y=t[0].statement+"")&&h(r,y)},i(t){v||(q($.$$.fragment,t),v=!0)},o(t){X($.$$.fragment,t),v=!1},d(n){n&&i(e),M($),t[18](null),t[19](null),t[20](null),o(w)}}}function At(t){const e=t.clipboardData.getData("text");document.execCommand("insertHTML",!1,e),t.preventDefault()}function Bt(t,e,n){let o,s;r(t,Y,t=>n(15,o=t)),r(t,Q,t=>n(16,s=t));let a,l,c,i,u,{task:d}=e,{updateTask:f}=e;function p(){d.completed?(n(2,l.style.color="rgb(58, 68, 76)",l),n(2,l.style.textDecoration="line-through",l)):(n(2,l.style.color="white",l),n(2,l.style.textDecoration="none",l))}return y(async()=>{await p()}),t.$set=t=>{"task"in t&&n(0,d=t.task),"updateTask"in t&&n(12,f=t.updateTask)},[d,a,l,c,function(t){t.target.checked?(n(2,l.style.color="rgb(58, 68, 76)",l),n(2,l.style.textDecoration="line-through",l)):(n(2,l.style.color="white",l),n(2,l.style.textDecoration="none",l)),n(0,d.completed=!d.completed,d),f(d)},function(t){13===t.keyCode&&(t.target.blur(),l.preventDefault())},function(t){i=t.target.textContent.trim()},function(t){u=t.target.textContent.trim(),u!==i&&(0===u.length&&(t.target.textContent=i),n(0,d.statement=u,d),f(d))},function(){n(3,c.style.display="block",c)},function(){n(3,c.style.display="none",c)},function(){l.focus()},async function(){if((await fetch("task",{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(d)})).ok){const t=s.slice().filter(t=>d.id!==t.id);Q.set(t)}},f,i,u,o,s,p,function(t){k[t?"unshift":"push"](()=>{n(2,l=t)})},function(t){k[t?"unshift":"push"](()=>{n(3,c=t)})},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})}]}class Ft extends U{constructor(t){super(),H(this,t,Bt,St,a,{task:0,updateTask:12})}}function Lt(t){let e,n,s;const a=new Ft({props:{updateTask:t[1],task:t[0]}});return{c(){e=u("div"),R(a.$$.fragment),g(e,"class","container svelte-d0enk"),g(e,"draggable","true")},m(r,l,i){c(r,e,l),K(a,e,null),t[3](e),n=!0,i&&o(s),s=[m(e,"dragstart",t[4]),m(e,"dragend",t[5])]},p(t,[e]){const n={};2&e&&(n.updateTask=t[1]),1&e&&(n.task=t[0]),a.$set(n)},i(t){n||(q(a.$$.fragment,t),n=!0)},o(t){X(a.$$.fragment,t),n=!1},d(n){n&&i(e),M(a),t[3](null),o(s)}}}function Dt(t,e,n){let o,{task:s}=e,{updateTask:a}=e;return t.$set=t=>{"task"in t&&n(0,s=t.task),"updateTask"in t&&n(1,a=t.updateTask)},[s,a,o,function(t){k[t?"unshift":"push"](()=>{n(2,o=t)})},t=>{et.set(s),setTimeout(()=>{t.target.style.display="none"},0)},t=>{et.set(null),t.target.style.display="flex"}]}class Nt extends U{constructor(t){super(),H(this,t,Dt,Lt,a,{task:0,updateTask:1})}}function qt(t,e,n){const o=t.slice();return o[5]=e[n],o}function Xt(t){let e;const n=new Nt({props:{updateTask:t[0],task:t[5]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.updateTask=t[0]),2&e&&(o.task=t[5]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function jt(t){let e,n,o=t[1],s=[];for(let e=0;e<o.length;e+=1)s[e]=Xt(qt(t,o,e));const a=t=>X(s[t],1,1,()=>{s[t]=null});return{c(){e=u("div");for(let t=0;t<s.length;t+=1)s[t].c();g(e,"class","container svelte-9pw051")},m(t,o){c(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(3&n){let r;for(o=t[1],r=0;r<o.length;r+=1){const a=qt(t,o,r);s[r]?(s[r].p(a,n),q(s[r],1)):(s[r]=Xt(a),s[r].c(),q(s[r],1),s[r].m(e,null))}for(D(),r=o.length;r<s.length;r+=1)a(r);N()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)q(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)X(s[t]);n=!1},d(t){t&&i(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t)}}}function Pt(t,e,n){let o;r(t,Q,t=>n(4,o=t));let{box:s}=e,{updateTask:a}=e,{movable:l=!1}=e,c=Array();return y(async()=>{let t=await o.filter(t=>t.container===s);n(1,c=t)}),Q.subscribe(async t=>{let e=await t.filter(t=>t.container===s);n(1,c=e)}),t.$set=t=>{"box"in t&&n(2,s=t.box),"updateTask"in t&&n(0,a=t.updateTask),"movable"in t&&n(3,l=t.movable)},[a,c,s,l]}class Rt extends U{constructor(t){super(),H(this,t,Pt,jt,a,{box:2,updateTask:0,movable:3})}}function Kt(t){let e;const n=new Rt({props:{updateTask:t[1],box:t[0],movable:!0}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Mt(t){let e;const n=new Rt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function It(t){let e;const n=new Rt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Ht(t){let e;const n=new Rt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Ut(t){let e,n,o,s,a,r,d,p,m;const h=new kt({props:{updateTask:t[1]}}),b=new Tt({});let v="INBOX"===t[0]&&Kt(t),w="TODAY"===t[0]&&Mt(t),y="WEEK"===t[0]&&It(t),$="LATE"===t[0]&&Ht(t);return{c(){e=u("div"),n=u("header"),R(h.$$.fragment),o=f(),s=u("main"),R(b.$$.fragment),a=f(),v&&v.c(),r=f(),w&&w.c(),d=f(),y&&y.c(),p=f(),$&&$.c(),g(n,"class","svelte-162pqvf"),g(s,"class","svelte-162pqvf"),g(e,"class","app svelte-162pqvf")},m(t,i){c(t,e,i),l(e,n),K(h,n,null),l(e,o),l(e,s),K(b,s,null),l(s,a),v&&v.m(s,null),l(s,r),w&&w.m(s,null),l(s,d),y&&y.m(s,null),l(s,p),$&&$.m(s,null),m=!0},p(t,[e]){"INBOX"===t[0]?v?(v.p(t,e),q(v,1)):(v=Kt(t),v.c(),q(v,1),v.m(s,r)):v&&(D(),X(v,1,1,()=>{v=null}),N()),"TODAY"===t[0]?w?(w.p(t,e),q(w,1)):(w=Mt(t),w.c(),q(w,1),w.m(s,d)):w&&(D(),X(w,1,1,()=>{w=null}),N()),"WEEK"===t[0]?y?(y.p(t,e),q(y,1)):(y=It(t),y.c(),q(y,1),y.m(s,p)):y&&(D(),X(y,1,1,()=>{y=null}),N()),"LATE"===t[0]?$?($.p(t,e),q($,1)):($=Ht(t),$.c(),q($,1),$.m(s,null)):$&&(D(),X($,1,1,()=>{$=null}),N())},i(t){m||(q(h.$$.fragment,t),q(b.$$.fragment,t),q(v),q(w),q(y),q($),m=!0)},o(t){X(h.$$.fragment,t),X(b.$$.fragment,t),X(v),X(w),X(y),X($),m=!1},d(t){t&&i(e),M(h),M(b),v&&v.d(),w&&w.d(),y&&y.d(),$&&$.d()}}}function Jt(t,e,n){let o,s,a,l;return r(t,ht,t=>n(2,o=t)),r(t,Y,t=>n(3,s=t)),r(t,Q,t=>n(4,a=t)),r(t,tt,t=>n(0,l=t)),y(async()=>{await async function(){const t=await fetch("/task",{method:"GET"});if(t.ok){const e=await t.json(),n=[];await e.forEach(t=>{n.push({id:t.id,statement:t.statement,dateOfCreation:new Date(t.dateOfCreation),container:t.container,completed:t.completed})}),Q.set(n)}}(),await tt.set(o.substring(1).toUpperCase())}),[l,async function(t){const e={id:t.id,completed:t.completed,statement:t.statement,dateOfCreation:null,dateOfFinish:null,creator:null,container:t.container},n=await fetch("/task",{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":s},body:JSON.stringify(e)});if(n.ok){const t=await n.json(),e=a;await e.forEach(e=>{t.id===e.id&&(e.statement=t.statement,e.completed=t.completed,e.container=t.container)}),await Q.set(e)}}]}class zt extends U{constructor(t){super(),H(this,t,Jt,Ut,a,{})}}function Wt(t){let e=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let o=n[t];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}const{window:Yt}=P;function Gt(t){let e,n;var o=gt[t[1]];if(o)var s=new o({});return{c(){s&&R(s.$$.fragment),e=p()},m(t,o){s&&K(s,t,o),c(t,e,o),n=!0},p(t,n){if(o!==(o=gt[t[1]])){if(s){D();const t=s;X(t.$$.fragment,1,0,()=>{M(t,1)}),N()}o?(R((s=new o({})).$$.fragment),q(s.$$.fragment,1),K(s,e.parentNode,e)):s=null}},i(t){n||(s&&q(s.$$.fragment,t),n=!0)},o(t){s&&X(s.$$.fragment,t),n=!1},d(t){t&&i(e),s&&M(s,t)}}}function Vt(e){let n;const o=new zt({});return{c(){R(o.$$.fragment)},m(t,e){K(o,t,e),n=!0},p:t,i(t){n||(q(o.$$.fragment,t),n=!0)},o(t){X(o.$$.fragment,t),n=!1},d(t){M(o,t)}}}function Zt(t){let e,n,o,s=Z&&function(t){let e,n,o,s;const a=[Vt,Gt],r=[];function l(t,e){return t[0]?0:1}return e=l(t),n=r[e]=a[e](t),{c(){n.c(),o=p()},m(t,n){r[e].m(t,n),c(t,o,n),s=!0},p(t,s){let c=e;e=l(t),e===c?r[e].p(t,s):(D(),X(r[c],1,1,()=>{r[c]=null}),N(),n=r[e],n||(n=r[e]=a[e](t),n.c()),q(n,1),n.m(o.parentNode,o))},i(t){s||(q(n),s=!0)},o(t){X(n),s=!1},d(t){r[e].d(t),t&&i(o)}}}(t);return{c(){s&&s.c(),e=p()},m(t,a,r){s&&s.m(t,a),c(t,e,a),n=!0,r&&o(),o=m(Yt,"popstate",Qt)},p(t,[e]){Z&&s.p(t,e)},i(t){n||(q(s),n=!0)},o(t){X(s),n=!1},d(t){s&&s.d(t),t&&i(e),o()}}}function Qt(t){ht.set(t.state.path)}function te(t,e,n){let o,s;return r(t,V,t=>n(0,o=t)),r(t,ht,t=>n(1,s=t)),y(async()=>{await async function(){const t=await fetch("/user",{redirect:"manual"});if(t.ok){let e=await t.json();await G.set(e),await V.set(!0)}}(),o&&"/"===window.location.pathname?await ht.set("/today"):await ht.set(window.location.pathname),o||"/"!==window.location.pathname||await ht.set("/login"),history.state||await window.history.replaceState({path:s},"",s),await Z.set(!0),await function(){const t=Wt("JSESSIONID"),e=Wt("XSRF-TOKEN");W.set(t),Y.set(e)}()}),[o,s]}return new class extends U{constructor(t){super(),H(this,t,te,Zt,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
