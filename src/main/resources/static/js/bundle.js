var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let b;function v(t){b=t}function w(){if(!b)throw new Error("Function called outside component initialization");return b}function y(t){w().$$.on_mount.push(t)}const $=[],k=[],x=[],_=[],T=Promise.resolve();let E=!1;function C(t){x.push(t)}let O=!1;const S=new Set;function A(){if(!O){O=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];v(e),B(e.$$)}for($.length=0;k.length;)k.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];S.has(e)||(S.add(e),e())}x.length=0}while($.length);for(;_.length;)_.pop()();E=!1,O=!1,S.clear()}}function B(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const F=new Set;let L;function D(){L={r:0,c:[],p:L}}function N(){L.r||o(L.c),L=L.p}function q(t,e){t&&t.i&&(F.delete(t),t.i(e))}function X(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),L.c.push(()=>{F.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function j(t,e){const n=e.token={};function o(t,o,s,a){if(e.token!==n)return;e.resolved=a;let r=e.ctx;void 0!==s&&(r=r.slice(),r[s]=a);const l=t&&(e.current=t)(r);let i=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==o&&t&&(D(),X(t,1,1,()=>{e.blocks[n]=null}),N())}):e.block.d(1),l.c(),q(l,1),l.m(e.mount(),e.anchor),i=!0),e.block=l,e.blocks&&(e.blocks[o]=l),i&&A()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=w();if(t.then(t=>{v(n),o(e.then,1,e.value,t),v(null)},t=>{v(n),o(e.catch,2,e.error,t),v(null)}),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var s}const P="undefined"!=typeof window?window:global;function R(t){t&&t.c()}function K(t,n,a){const{fragment:r,on_mount:l,on_destroy:i,after_update:c}=t.$$;r&&r.m(n,a),C(()=>{const n=l.map(e).filter(s);i?i.push(...n):o(n),t.$$.on_mount=[]}),c.forEach(C)}function M(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&($.push(t),E||(E=!0,T.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,s,a,r,l,i,u=[-1]){const d=b;v(e);const f=s.props||{},p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=a?a(e,f,(t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(p.bound[t]&&p.bound[t](s),m&&I(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();s.intro&&q(e.$$.fragment),K(e,s.target,s.anchor),A()}v(d)}class U{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const J=[];function z(e,n=t){let o;const s=[];function r(t){if(a(e,t)&&(e=t,o)){const t=!J.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),J.push(n,e)}if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(a,l=t){const i=[a,l];return s.push(i),1===s.length&&(o=n(r)||t),a(e),()=>{const t=s.indexOf(i);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}const W=z(""),Y=z(""),G=z(null),V=z(!1),Z=z(!1),Q=z(Array(0)),tt=z(""),et=z(null),nt=z(null);function ot(e){let n,s,a,r,d,p,g,b,v,w,y,$,k,x,_,T,E,C,O,S,A;return{c(){n=u("div"),s=u("div"),a=u("form"),r=u("div"),r.innerHTML='<h2 class="svelte-19a25bx">please log in</h2>',d=f(),p=u("label"),g=u("div"),g.textContent="username",b=f(),v=u("input"),w=f(),y=u("label"),$=u("div"),$.textContent="password",k=f(),x=u("input"),_=f(),T=u("div"),T.innerHTML='<button class="loginForm__submitButton svelte-19a25bx" type="submit">log in</button> \n                <label class="checkbox-label svelte-19a25bx"><input type="checkbox" name="remember-me" class="defCheckMark">\n                    remember me\n                </label>',E=f(),C=u("a"),C.textContent="sign up",O=f(),S=u("input"),h(r,"class","loginForm__title svelte-19a25bx"),h(g,"class","inputAround__text svelte-19a25bx"),h(g,"name","label-div"),h(v,"type","text"),h(v,"id","username"),h(v,"name","username"),h(v,"class","loginForm__input svelte-19a25bx"),v.required=!0,h(p,"class","inputAround svelte-19a25bx"),h($,"class","inputAround__text svelte-19a25bx"),h($,"name","label-div"),h(x,"type","password"),h(x,"id","password"),h(x,"name","password"),h(x,"class","loginForm__input svelte-19a25bx"),x.required=!0,h(y,"class","inputAround svelte-19a25bx"),h(T,"class","loginForm__buttonArea svelte-19a25bx"),h(C,"class","regLink svelte-19a25bx"),h(C,"href","/registration"),h(S,"id","_csrf"),h(S,"name","_csrf"),h(S,"type","hidden"),S.value=e[2],h(a,"class","loginForm svelte-19a25bx"),h(s,"class","container svelte-19a25bx"),h(n,"class","login svelte-19a25bx")},m(t,c,u){i(t,n,c),l(n,s),l(s,a),l(a,r),l(a,d),l(a,p),l(p,g),e[3](g),l(p,b),l(p,v),l(a,w),l(a,y),l(y,$),e[6]($),l(y,k),l(y,x),l(a,_),l(a,T),l(a,E),l(a,C),l(a,O),l(a,S),u&&o(A),A=[m(v,"focus",e[4]),m(v,"focusout",e[5]),m(x,"focus",e[7]),m(x,"focusout",e[8]),m(C,"click",e[9]),m(a,"submit",st)]},p(t,[e]){4&e&&(S.value=t[2])},i:t,o:t,d(t){t&&c(n),e[3](null),e[6](null),o(A)}}}async function st(t){const e=new XMLHttpRequest,n=new FormData(t.target);e.open("POST","/login",!0),e.send(n),e.onload=()=>{200==e.status&&(window.location.pathname="/")},t.target.username.value="",t.target.password.value="",t.preventDefault()}function at(t,e,n){let o,s,a;r(t,Y,t=>n(2,o=t));return[s,a,o,function(t){k[t?"unshift":"push"](()=>{n(0,s=t)})},()=>{n(0,s.style.color="rgb(73, 160, 235)",s)},()=>{n(0,s.style.color="rgb(125, 138, 150)",s)},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})},()=>{n(1,a.style.color="rgb(73, 160, 235)",a)},()=>{n(1,a.style.color="rgb(125, 138, 150)",a)},t=>{ht.set(t.target.pathname),window.history.pushState({path:"/registration"},"",window.location.origin+"/registration"),t.preventDefault()}]}class rt extends Error{constructor(t){super(t),this.name="ValidationError"}}const lt=/^[a-zA-Z]\w{5,25}$/;function it(t){let e,n,o=t[17].message+"";return{c(){e=u("div"),n=d(o),h(e,"class","error svelte-37b00v")},m(t,o){i(t,e,o),l(e,n)},p(t,e){8&e&&o!==(o=t[17].message+"")&&g(n,o)},d(t){t&&c(e)}}}function ct(e){return{c:t,m:t,p:t,d:t}}function ut(e){let n;return{c(){n=u("div"),n.textContent="..."},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function dt(e){let n,s,a,r,d,p,g,b,v,w,y,$,k,x,_,T,E,C,O,S,A,B,F,L,D,N,q,X,P,R={ctx:e,current:null,token:null,pending:ut,then:ct,catch:it,error:17};return j(r=e[3],R),{c(){n=u("div"),s=u("div"),a=u("div"),R.block.c(),d=f(),p=u("form"),g=u("div"),g.innerHTML='<h2 class="svelte-37b00v">please sign up</h2>',b=f(),v=u("label"),w=u("div"),w.textContent="username",y=f(),$=u("input"),k=f(),x=u("label"),_=u("div"),_.textContent="password",T=f(),E=u("input"),C=f(),O=u("label"),S=u("div"),S.textContent="confirm password",A=f(),B=u("input"),F=f(),L=u("div"),L.innerHTML='<button class="loginForm__submitButton svelte-37b00v" type="submit">\n                    register\n                </button>',D=f(),N=u("a"),N.textContent="sign in",q=f(),X=u("input"),h(a,"class","errorBlock svelte-37b00v"),h(g,"class","loginForm__title svelte-37b00v"),h(w,"class","inputAround__text svelte-37b00v"),h(w,"name","label-div"),h($,"type","text"),h($,"id","username"),h($,"name","username"),h($,"class","loginForm__input svelte-37b00v"),$.required=!0,h(v,"class","inputAround svelte-37b00v"),h(_,"class","inputAround__text svelte-37b00v"),h(_,"name","label-div"),h(E,"type","password"),h(E,"id","password"),h(E,"name","password"),h(E,"class","loginForm__input svelte-37b00v"),E.required=!0,h(x,"class","inputAround svelte-37b00v"),h(S,"class","inputAround__text svelte-37b00v"),h(S,"name","label-div"),h(B,"type","password"),h(B,"id","confirmPassword"),h(B,"name","confirmPassword"),h(B,"class","loginForm__input svelte-37b00v"),B.required=!0,h(O,"class","inputAround svelte-37b00v"),h(L,"class","loginForm__buttonArea svelte-37b00v"),h(N,"class","regLink svelte-37b00v"),h(N,"href","/login"),h(X,"id","_csrf"),h(X,"name","_csrf"),h(X,"type","hidden"),X.value=e[4],h(p,"class","registrationForm svelte-37b00v"),h(p,"id","registrationFrom"),h(s,"class","container svelte-37b00v"),h(n,"class","registration svelte-37b00v")},m(t,r,c){i(t,n,r),l(n,s),l(s,a),R.block.m(a,R.anchor=null),R.mount=()=>a,R.anchor=null,l(s,d),l(s,p),l(p,g),l(p,b),l(p,v),l(v,w),e[7](w),l(v,y),l(v,$),l(p,k),l(p,x),l(x,_),e[10](_),l(x,T),l(x,E),l(p,C),l(p,O),l(O,S),e[13](S),l(O,A),l(O,B),l(p,F),l(p,L),l(p,D),l(p,N),l(p,q),l(p,X),c&&o(P),P=[m($,"focus",e[8]),m($,"focusout",e[9]),m(E,"focus",e[11]),m(E,"focusout",e[12]),m(B,"focus",e[14]),m(B,"focusout",e[15]),m(N,"click",e[16]),m(p,"submit",e[5])]},p(t,[n]){if(e=t,R.ctx=e,8&n&&r!==(r=e[3])&&j(r,R));else{const t=e.slice();R.block.p(t,n)}16&n&&(X.value=e[4])},i:t,o:t,d(t){t&&c(n),R.block.d(),R.token=null,R=null,e[7](null),e[10](null),e[13](null),o(P)}}}function ft(t,e,n){const o=function(t){return lt.test(t)}(t),s=function(t){return t.length>8}(e),a=n===e;if(!o)throw new rt("Имя пользователя должно начинаться с латинской буквы и содержать не менее шести символов. ");if(!s)throw new rt("Пароль должен содержать не менее 8 символов.");if(!a)throw new rt("Пароли не совпадают.")}function pt(t,e,n){let o,s,a,l;r(t,Y,t=>n(4,o=t));let i="";async function c(){const t=document.querySelector("#registrationFrom"),e=t.username.value,n=t.password.value,s=t.confirmPassword.value;t.password.value="",t.confirmPassword.value="",await ft(e,n,s);const a={username:e,password:n,userRole:["USER"]};let r=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(a)});if(!r.ok)throw new Error("server not found");if(!("true"===await r.text()))throw new rt("user with that username already exists");r.ok&&(ht.set("/login"),window.history.pushState({path:"/login"},"",window.location.origin+"/login"))}return[s,a,l,i,o,function(t){n(3,i=c()),t.preventDefault()},c,function(t){k[t?"unshift":"push"](()=>{n(0,s=t)})},()=>{n(0,s.style.color="rgb(73, 160, 235)",s)},()=>{n(0,s.style.color="rgb(125, 138, 150)",s)},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})},()=>{n(1,a.style.color="rgb(73, 160, 235)",a)},()=>{n(1,a.style.color="rgb(125, 138, 150)",a)},function(t){k[t?"unshift":"push"](()=>{n(2,l=t)})},()=>{n(2,l.style.color="rgb(73, 160, 235)",l)},()=>{n(2,l.style.color="rgb(125, 138, 150)",l)},t=>{ht.set(t.target.pathname),window.history.pushState({path:"/login"},"",window.location.origin+"/login"),t.preventDefault()}]}const mt={"/login":class extends U{constructor(t){super(),H(this,t,at,ot,a,{})}},"/registration":class extends U{constructor(t){super(),H(this,t,pt,dt,a,{})}}},ht=z("/");function gt(e){let n,s,a,r,d,p,g,b,v,w,y,$,k,x;return{c(){n=u("div"),s=u("div"),a=u("div"),r=f(),d=u("div"),d.textContent="Входящие",p=f(),g=u("div"),g.textContent="Сегодня",b=f(),v=u("div"),v.textContent="На неделе",w=f(),y=u("div"),y.textContent="Позже",$=f(),k=u("div"),k.textContent="logout",h(a,"class","inbox boxButton__active svelte-s4bepw"),a.hidden=!0,h(d,"class","inbox boxButton svelte-s4bepw"),h(d,"id","inbox"),h(g,"class","boxButton svelte-s4bepw"),h(g,"id","today"),h(v,"class","boxButton svelte-s4bepw"),h(v,"id","week"),h(y,"class","boxButton svelte-s4bepw"),h(y,"id","late"),h(s,"class","boxesPart svelte-s4bepw"),h(k,"class","logoutButton svelte-s4bepw"),h(n,"class","content svelte-s4bepw")},m(t,c,u){i(t,n,c),l(n,s),l(s,a),l(s,r),l(s,d),l(s,p),l(s,g),l(s,b),l(s,v),l(s,w),l(s,y),l(n,$),l(n,k),u&&o(x),x=[m(d,"click",wt),m(g,"click",wt),m(v,"click",wt),m(y,"click",wt),m(k,"click",e[0])]},p:t,i:t,o:t,d(t){t&&c(n),o(x)}}}function bt(t){t.target.classList.add("boxButton__active"),nt.set(t.target.id)}function vt(t){t.preventDefault()}async function wt(t){const e=t.target;tt.set(e.id.toUpperCase()),ht.set(`/${e.id}`),window.history.pushState({path:`/${e.id}`},"",window.location.origin+`/${e.id}`)}function yt(t,e,n){let o,s,a,l,i;r(t,G,t=>n(2,o=t)),r(t,tt,t=>n(3,s=t)),r(t,et,t=>n(4,a=t)),r(t,nt,t=>n(5,l=t)),r(t,Y,t=>n(6,i=t));let{updateTask:c}=e;o.username;function u(t){s!==t.target.id&&t.target.classList.remove("boxButton__active"),nt.set(null)}async function d(t){!function(t,e,n=e){t.set(n)}(et,a.container=l.toUpperCase(),a),await c(a),await nt.set(null),s!==t.target.id&&t.target.classList.remove("boxButton__active")}return y(async()=>{Array.from(document.querySelectorAll(".boxButton")).forEach(t=>{t.addEventListener("dragenter",bt),t.addEventListener("dragleave",u),t.addEventListener("drop",d),t.addEventListener("dragover",vt)})}),tt.subscribe(t=>{if(""!==t){const e=t.toLowerCase(),n=Array.from(document.getElementsByClassName("boxButton")),o=document.getElementById(e);n.forEach(t=>{t.id!==e&&t.classList.remove("boxButton__active")}),o.classList.add("boxButton__active")}}),t.$set=t=>{"updateTask"in t&&n(1,c=t.updateTask)},[async function(){(await fetch("/logout",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":i}})).ok&&(window.location.pathname="/")},c]}class $t extends U{constructor(t){super(),H(this,t,yt,gt,a,{updateTask:1})}}function kt(e){let n,s,a,r,d,p,g;return{c(){n=u("div"),s=u("label"),s.textContent=">",a=f(),r=u("input"),d=f(),p=u("label"),p.textContent="#add",h(s,"id","arrowLabel"),h(s,"class","svelte-ybu00q"),h(r,"type","text"),h(r,"spellcheck","false"),h(r,"placeholder","Добавить новую задачу"),h(r,"class","svelte-ybu00q"),h(p,"id","addLabel"),h(p,"class","svelte-ybu00q"),h(n,"class","addTaskBlock svelte-ybu00q")},m(t,c,u){i(t,n,c),l(n,s),e[10](s),l(n,a),l(n,r),e[11](r),l(n,d),l(n,p),e[12](p),e[13](n),u&&o(g),g=[m(r,"keypress",e[4]),m(r,"focus",e[6]),m(r,"focusout",e[7]),m(p,"click",e[5])]},p:t,i:t,o:t,d(t){t&&c(n),e[10](null),e[11](null),e[12](null),e[13](null),o(g)}}}function xt(t,e,n){let o,s,a,l,i,c;async function u(){if(!c.value.trim())return void n(3,c.value="",c);const t={completed:!1,statement:c.value.trim(),dateOfCreation:new Date(Date.now()),dateOfFinish:null,creator:null,container:"INBOX"},e=await fetch("/task",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(t)});if(e.ok){let t=s.slice();const n=await e.json();await t.push({id:n.id,statement:n.statement,container:n.container,completed:n.completed}),await Q.set(t)}n(3,c.value="",c)}return r(t,Y,t=>n(8,o=t)),r(t,Q,t=>n(9,s=t)),[a,l,i,c,async function(t){13===t.keyCode&&await u()},u,function(){n(0,a.style.borderColor="rgb(73, 160, 235)",a),n(1,l.style.color="rgb(73, 160, 235)",l),n(2,i.style.color="rgb(123, 177, 70)",i)},function(){n(0,a.style.borderColor="rgb(125, 138, 150)",a),n(1,l.style.color="rgb(125, 138, 150)",l),n(2,i.style.color="rgb(125, 138, 150)",i),n(2,i.style.textShadow="none",i)},o,s,function(t){k[t?"unshift":"push"](()=>{n(1,l=t)})},function(t){k[t?"unshift":"push"](()=>{n(3,c=t)})},function(t){k[t?"unshift":"push"](()=>{n(2,i=t)})},function(t){k[t?"unshift":"push"](()=>{n(0,a=t)})}]}class _t extends U{constructor(t){super(),H(this,t,xt,kt,a,{})}}function Tt(e){let n,o,a,r,l,d;return{c(){n=u("input"),a=f(),r=u("label"),h(n,"type","checkbox"),h(n,"id",o="task-"+e[0]),h(n,"class","css-checkbox svelte-l9citf"),n.checked=e[2],h(r,"for",l="task-"+e[0]),h(r,"class","css-label svelte-l9citf")},m(t,o,l){i(t,n,o),i(t,a,o),i(t,r,o),l&&d(),d=m(n,"click",(function(){s(e[1])&&e[1].apply(this,arguments)}))},p(t,[s]){e=t,1&s&&o!==(o="task-"+e[0])&&h(n,"id",o),4&s&&(n.checked=e[2]),1&s&&l!==(l="task-"+e[0])&&h(r,"for",l)},i:t,o:t,d(t){t&&c(n),t&&c(a),t&&c(r),d()}}}function Et(t,e,n){let{id:o}=e,{checkEvent:s}=e,{completed:a}=e;return t.$set=t=>{"id"in t&&n(0,o=t.id),"checkEvent"in t&&n(1,s=t.checkEvent),"completed"in t&&n(2,a=t.completed)},[o,s,a]}class Ct extends U{constructor(t){super(),H(this,t,Et,Tt,a,{id:0,checkEvent:1,completed:2})}}function Ot(t){let e,n,s,a,r,p,b,v,w,y=t[0].statement+"";const $=new Ct({props:{checkEvent:t[4],id:t[0].id,completed:t[0].completed}});return{c(){e=u("div"),R($.$$.fragment),n=f(),s=u("div"),a=u("div"),r=d(y),p=f(),b=u("div"),h(a,"class","statementField svelte-yl74hr"),h(a,"contenteditable","true"),h(a,"type","text"),h(a,"spellcheck","false"),h(a,"onautocomplete","false"),h(b,"class","deleteButton svelte-yl74hr"),h(s,"class","taskBlock svelte-yl74hr"),h(e,"class","content svelte-yl74hr")},m(c,u,d){i(c,e,u),K($,e,null),l(e,n),l(e,s),l(s,a),l(a,r),t[18](a),l(s,p),l(s,b),t[19](b),t[20](e),v=!0,d&&o(w),w=[m(a,"keypress",t[5]),m(a,"focus",t[6]),m(a,"focusout",t[7]),m(a,"paste",St),m(b,"click",t[11]),m(s,"click",t[10]),m(e,"mouseover",t[8]),m(e,"mouseout",t[9])]},p(t,[e]){const n={};1&e&&(n.id=t[0].id),1&e&&(n.completed=t[0].completed),$.$set(n),(!v||1&e)&&y!==(y=t[0].statement+"")&&g(r,y)},i(t){v||(q($.$$.fragment,t),v=!0)},o(t){X($.$$.fragment,t),v=!1},d(n){n&&c(e),M($),t[18](null),t[19](null),t[20](null),o(w)}}}function St(t){const e=t.clipboardData.getData("text");document.execCommand("insertHTML",!1,e),t.preventDefault()}function At(t,e,n){let o,s;r(t,Y,t=>n(15,o=t)),r(t,Q,t=>n(16,s=t));let a,l,i,c,u,{task:d}=e,{updateTask:f}=e;function p(){d.completed?(n(2,l.style.color="rgb(58, 68, 76)",l),n(2,l.style.textDecoration="line-through",l)):(n(2,l.style.color="white",l),n(2,l.style.textDecoration="none",l))}return y(async()=>{await p()}),t.$set=t=>{"task"in t&&n(0,d=t.task),"updateTask"in t&&n(12,f=t.updateTask)},[d,a,l,i,function(t){t.target.checked?(n(2,l.style.color="rgb(58, 68, 76)",l),n(2,l.style.textDecoration="line-through",l)):(n(2,l.style.color="white",l),n(2,l.style.textDecoration="none",l)),n(0,d.completed=!d.completed,d),f(d)},function(t){13===t.keyCode&&(t.target.blur(),l.preventDefault())},function(t){c=t.target.textContent.trim()},function(t){u=t.target.textContent.trim(),u!==c&&(0===u.length&&(t.target.textContent=c),n(0,d.statement=u,d),f(d))},function(){n(3,i.style.display="block",i)},function(){n(3,i.style.display="none",i)},function(){l.focus()},async function(){if((await fetch("task",{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":o},body:JSON.stringify(d)})).ok){const t=s.slice().filter(t=>d.id!==t.id);Q.set(t)}},f,c,u,o,s,p,function(t){k[t?"unshift":"push"](()=>{n(2,l=t)})},function(t){k[t?"unshift":"push"](()=>{n(3,i=t)})},function(t){k[t?"unshift":"push"](()=>{n(1,a=t)})}]}class Bt extends U{constructor(t){super(),H(this,t,At,Ot,a,{task:0,updateTask:12})}}function Ft(t){let e,n,s;const a=new Bt({props:{updateTask:t[1],task:t[0]}});return{c(){e=u("div"),R(a.$$.fragment),h(e,"class","container svelte-d0enk"),h(e,"draggable","true")},m(r,l,c){i(r,e,l),K(a,e,null),t[3](e),n=!0,c&&o(s),s=[m(e,"dragstart",t[4]),m(e,"dragend",t[5])]},p(t,[e]){const n={};2&e&&(n.updateTask=t[1]),1&e&&(n.task=t[0]),a.$set(n)},i(t){n||(q(a.$$.fragment,t),n=!0)},o(t){X(a.$$.fragment,t),n=!1},d(n){n&&c(e),M(a),t[3](null),o(s)}}}function Lt(t,e,n){let o,{task:s}=e,{updateTask:a}=e;return t.$set=t=>{"task"in t&&n(0,s=t.task),"updateTask"in t&&n(1,a=t.updateTask)},[s,a,o,function(t){k[t?"unshift":"push"](()=>{n(2,o=t)})},t=>{et.set(s),setTimeout(()=>{t.target.style.display="none"},0)},t=>{et.set(null),t.target.style.display="flex"}]}class Dt extends U{constructor(t){super(),H(this,t,Lt,Ft,a,{task:0,updateTask:1})}}function Nt(t,e,n){const o=t.slice();return o[5]=e[n],o}function qt(t){let e;const n=new Dt({props:{updateTask:t[0],task:t[5]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.updateTask=t[0]),2&e&&(o.task=t[5]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Xt(t){let e,n,o=t[1],s=[];for(let e=0;e<o.length;e+=1)s[e]=qt(Nt(t,o,e));const a=t=>X(s[t],1,1,()=>{s[t]=null});return{c(){e=u("div");for(let t=0;t<s.length;t+=1)s[t].c();h(e,"class","container svelte-9pw051")},m(t,o){i(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(3&n){let r;for(o=t[1],r=0;r<o.length;r+=1){const a=Nt(t,o,r);s[r]?(s[r].p(a,n),q(s[r],1)):(s[r]=qt(a),s[r].c(),q(s[r],1),s[r].m(e,null))}for(D(),r=o.length;r<s.length;r+=1)a(r);N()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)q(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)X(s[t]);n=!1},d(t){t&&c(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t)}}}function jt(t,e,n){let o;r(t,Q,t=>n(4,o=t));let{box:s}=e,{updateTask:a}=e,{movable:l=!1}=e,i=Array();return y(async()=>{let t=await o.filter(t=>t.container===s);n(1,i=t)}),Q.subscribe(async t=>{let e=await t.filter(t=>t.container===s);n(1,i=e)}),t.$set=t=>{"box"in t&&n(2,s=t.box),"updateTask"in t&&n(0,a=t.updateTask),"movable"in t&&n(3,l=t.movable)},[a,i,s,l]}class Pt extends U{constructor(t){super(),H(this,t,jt,Xt,a,{box:2,updateTask:0,movable:3})}}function Rt(t){let e,n;const o=new _t({}),s=new Pt({props:{updateTask:t[1],box:t[0],movable:!0}});return{c(){R(o.$$.fragment),e=f(),R(s.$$.fragment)},m(t,a){K(o,t,a),i(t,e,a),K(s,t,a),n=!0},p(t,e){const n={};1&e&&(n.box=t[0]),s.$set(n)},i(t){n||(q(o.$$.fragment,t),q(s.$$.fragment,t),n=!0)},o(t){X(o.$$.fragment,t),X(s.$$.fragment,t),n=!1},d(t){M(o,t),t&&c(e),M(s,t)}}}function Kt(t){let e;const n=new Pt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Mt(t){let e;const n=new Pt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function It(t){let e;const n=new Pt({props:{updateTask:t[1],box:t[0]}});return{c(){R(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.box=t[0]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){M(n,t)}}}function Ht(t){let e,n,o,s,a,r,d,p;const m=new $t({props:{updateTask:t[1]}});let g="INBOX"===t[0]&&Rt(t),b="TODAY"===t[0]&&Kt(t),v="WEEK"===t[0]&&Mt(t),w="LATE"===t[0]&&It(t);return{c(){e=u("div"),n=u("header"),R(m.$$.fragment),o=f(),s=u("main"),g&&g.c(),a=f(),b&&b.c(),r=f(),v&&v.c(),d=f(),w&&w.c(),h(n,"class","svelte-162pqvf"),h(s,"class","svelte-162pqvf"),h(e,"class","app svelte-162pqvf")},m(t,c){i(t,e,c),l(e,n),K(m,n,null),l(e,o),l(e,s),g&&g.m(s,null),l(s,a),b&&b.m(s,null),l(s,r),v&&v.m(s,null),l(s,d),w&&w.m(s,null),p=!0},p(t,[e]){"INBOX"===t[0]?g?(g.p(t,e),q(g,1)):(g=Rt(t),g.c(),q(g,1),g.m(s,a)):g&&(D(),X(g,1,1,()=>{g=null}),N()),"TODAY"===t[0]?b?(b.p(t,e),q(b,1)):(b=Kt(t),b.c(),q(b,1),b.m(s,r)):b&&(D(),X(b,1,1,()=>{b=null}),N()),"WEEK"===t[0]?v?(v.p(t,e),q(v,1)):(v=Mt(t),v.c(),q(v,1),v.m(s,d)):v&&(D(),X(v,1,1,()=>{v=null}),N()),"LATE"===t[0]?w?(w.p(t,e),q(w,1)):(w=It(t),w.c(),q(w,1),w.m(s,null)):w&&(D(),X(w,1,1,()=>{w=null}),N())},i(t){p||(q(m.$$.fragment,t),q(g),q(b),q(v),q(w),p=!0)},o(t){X(m.$$.fragment,t),X(g),X(b),X(v),X(w),p=!1},d(t){t&&c(e),M(m),g&&g.d(),b&&b.d(),v&&v.d(),w&&w.d()}}}function Ut(t,e,n){let o,s,a,l;return r(t,ht,t=>n(2,o=t)),r(t,Y,t=>n(3,s=t)),r(t,Q,t=>n(4,a=t)),r(t,tt,t=>n(0,l=t)),y(async()=>{await async function(){const t=await fetch("/task",{method:"GET"});if(t.ok){const e=await t.json(),n=[];await e.forEach(t=>{n.push({id:t.id,statement:t.statement,dateOfCreation:new Date(t.dateOfCreation),container:t.container,completed:t.completed})}),Q.set(n)}}(),await tt.set(o.substring(1).toUpperCase())}),[l,async function(t){const e={id:t.id,completed:t.completed,statement:t.statement,dateOfCreation:null,dateOfFinish:null,creator:null,container:t.container},n=await fetch("/task",{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":s},body:JSON.stringify(e)});if(n.ok){const t=await n.json(),e=a;await e.forEach(e=>{t.id===e.id&&(e.statement=t.statement,e.completed=t.completed,e.container=t.container)}),await Q.set(e)}}]}class Jt extends U{constructor(t){super(),H(this,t,Ut,Ht,a,{})}}function zt(t){let e=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let o=n[t];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}const{window:Wt}=P;function Yt(t){let e,n;var o=mt[t[1]];if(o)var s=new o({});return{c(){s&&R(s.$$.fragment),e=p()},m(t,o){s&&K(s,t,o),i(t,e,o),n=!0},p(t,n){if(o!==(o=mt[t[1]])){if(s){D();const t=s;X(t.$$.fragment,1,0,()=>{M(t,1)}),N()}o?(R((s=new o({})).$$.fragment),q(s.$$.fragment,1),K(s,e.parentNode,e)):s=null}},i(t){n||(s&&q(s.$$.fragment,t),n=!0)},o(t){s&&X(s.$$.fragment,t),n=!1},d(t){t&&c(e),s&&M(s,t)}}}function Gt(e){let n;const o=new Jt({});return{c(){R(o.$$.fragment)},m(t,e){K(o,t,e),n=!0},p:t,i(t){n||(q(o.$$.fragment,t),n=!0)},o(t){X(o.$$.fragment,t),n=!1},d(t){M(o,t)}}}function Vt(t){let e,n,o,s=Z&&function(t){let e,n,o,s;const a=[Gt,Yt],r=[];function l(t,e){return t[0]?0:1}return e=l(t),n=r[e]=a[e](t),{c(){n.c(),o=p()},m(t,n){r[e].m(t,n),i(t,o,n),s=!0},p(t,s){let i=e;e=l(t),e===i?r[e].p(t,s):(D(),X(r[i],1,1,()=>{r[i]=null}),N(),n=r[e],n||(n=r[e]=a[e](t),n.c()),q(n,1),n.m(o.parentNode,o))},i(t){s||(q(n),s=!0)},o(t){X(n),s=!1},d(t){r[e].d(t),t&&c(o)}}}(t);return{c(){s&&s.c(),e=p()},m(t,a,r){s&&s.m(t,a),i(t,e,a),n=!0,r&&o(),o=m(Wt,"popstate",Zt)},p(t,[e]){Z&&s.p(t,e)},i(t){n||(q(s),n=!0)},o(t){X(s),n=!1},d(t){s&&s.d(t),t&&c(e),o()}}}function Zt(t){ht.set(t.state.path)}function Qt(t,e,n){let o,s;return r(t,V,t=>n(0,o=t)),r(t,ht,t=>n(1,s=t)),y(async()=>{await async function(){const t=await fetch("/user",{redirect:"manual"});if(t.ok){let e=await t.json();await G.set(e),await V.set(!0)}}(),o&&"/"===window.location.pathname?await ht.set("/today"):await ht.set(window.location.pathname),o||"/"!==window.location.pathname||await ht.set("/login"),history.state||await window.history.replaceState({path:s},"",s),await Z.set(!0),await function(){const t=zt("JSESSIONID"),e=zt("XSRF-TOKEN");W.set(t),Y.set(e)}()}),[o,s]}return new class extends U{constructor(t){super(),H(this,t,Qt,Vt,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
